{"name":"moodle - a simple node.js model","tagline":"Model module for node for use with both mongodb and mysql.","body":"node-model\r\n==========\r\n\r\n## Install\r\n```bash\r\n$ npm install moodle\r\n```\r\n\r\n## Usage\r\n\r\n### Create model (example file)\r\n```javascript\r\nvar db    = require('your-mongo-instance');\r\nvar Model = require('moodle');\r\n\r\nvar User = new Model('User');\r\n\r\nUser.storage('mongodb')\r\n    .connect(\r\n        function() { \r\n            // Return your mongo instance with selected collection\r\n            return db.users \r\n        }\r\n    );\r\n\r\n/**\r\n * Define attributes\r\n */\r\nUser.attr('_id', 'ObjectId');\r\n\r\nUser.attr('username', 'String')\r\n    .required();\r\n\r\nUser.attr('permissions', 'Object');\r\n\r\nUser.attr('password', 'String')\r\n    .required();\r\n\r\nUser.attr('last_login', 'Date')\r\n    .default(null);\r\n\r\nUser.attr('status', 'Bool')\r\n    .default(true)\r\n    .required();\r\n\r\nmodules.export = User;\r\n\r\n```\r\n\r\n### Using the model\r\n```javascript\r\n\r\nvar User = require('./models/user');\r\n\r\n/**\r\n * Save new\r\n */\r\nvar user = new User();\r\n\r\nuser.owner(\"51223c75bb64ba8d60000000\");\r\nuser.username(\"root\");\r\nuser.password(\"secret\");\r\nuser.permissions({\r\n    wheel: true\r\n});\r\n\r\nuser.save(function(err) {\r\n    if (err) throw err;\r\n    \r\n    user._id(); // return the generated _id\r\n    // _id\r\n    \r\n    console.log(\"saved!\");\r\n});\r\n\r\n/**\r\n * Update model\r\n */\r\nUser.findOne({_id: \"51519576d2381d38df000003\"}, function(err, user) {\r\n    if (err) throw err;\r\n    \r\n    user.last_login(new Date());\r\n    user.save(function(err) {\r\n        if (err) throw err;\r\n    });\r\n});\r\n\r\n/**\r\n * Find multiple\r\n */\r\nUser.find({status:true}, function(err, users) {\r\n    \r\n    for (var user in users) {\r\n        if (user instanceof User)\r\n            // true\r\n        \r\n    }\r\n    \r\n});\r\n\r\n```\r\n\r\n\r\n\r\n\r\n","google":"UA-39670076-1","note":"Don't delete this file! It's used internally to help with page regeneration."}